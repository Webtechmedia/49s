!function($){$.fn.extend({assetLoader:function(options){function fillArraysFromDom($dom){var $images=aL.images?$dom.find("img"):void 0,$videos=aL.videos?$dom.find("video"):void 0,$audios=aL.audios?$dom.find("audio"):void 0;$images&&$images.each(function(){aL.files.img.push($(this)[0].src)}),$videos&&$videos.each(function(){aL.files.video.push($(this)[0].src?$(this)[0].src:$(this).find("source")[0].src)}),$audios&&$audios.each(function(){aL.files.audio.push($(this)[0].src?$(this)[0].src:$(this).find("source")[0].src)})}function preload(type){aL.files[type].length>0?"img"===type?preloadImg():"video"===type?preloadMedia(type):"audio"===type&&preloadMedia(type):onTypeLoaded(type)}function preloadImg(){if($.inArray(loadedImages,aL.files.img[0])<0){var _img=new Image;_img.onload=function(){_img.onload=null,aL.files.img.shift(),loadedImages.push(_img.src),preload("img")},_img.onerror=_img.onabort=function(){throw errors.loadError+_img.src},_img.src=aL.files.img[0]}else aL.files.img.shift(),preload("img")}function preloadMedia(type){var loadedArray="video"===type?loadedVideos:loadedAudios;if($.inArray(loadedArray,aL.files[type][0])<0){var _file=document.createElement(type);_file.addEventListener(mediaLoadingModes[aL.mediaLoadingMode],function(){onMediaPreloaded(type,loadedArray,_file.src)}),_file.onerror=_file.onabort=function(){throw errors.loadError+_file.src},_file.src=aL.files[type][0]}else aL.files[type].shift(),preload(type)}function onMediaPreloaded(type,loadedArray,src){aL.files[type].shift(),loadedArray.push(src),preload(type)}function onTypeLoaded(type){"img"===type?aL.audios?preload("audio"):onTypeLoaded("audio"):"audio"===type?aL.videos?preload("video"):onTypeLoaded("video"):"video"===type&&"function"==typeof aL.onLoaded&&aL.onLoaded({img:loadedImages,video:loadedVideos})}var jQueryMode="function"==typeof this?!1:!0,aL=this,$this=$(jQueryMode?this:"html"),errors={jQueryMode:"jQuery.assetLoader must be called on a DOM element or files arrays must be supplied",loadError:"There has been an error loading : "};if($.extend(aL,{images:!0,videos:!0,audios:!1,files:{img:[],video:[],audio:[]},mediaLoadingMode:0,onLoaded:void 0}),jQueryMode&&"function"==typeof options)aL.onLoaded=options;else{if("function"==typeof options)throw errors.jQueryMode;$.extend(aL,options)}jQueryMode&&fillArraysFromDom($this);var loadedImages=[],loadedVideos=[],loadedAudios=[],mediaLoadingModes=["loadedmetadata","canplaythrough"];aL.images?preload("img"):onTypeLoaded("img")}}),$.extend({assetLoader:$.fn.assetLoader})}(jQuery);